<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:sec="http://www.springframework.org/security/facelets/tags"
	xmlns:util="http://java.sun.com/jsf/composite/components"
	xmlns:p="http://primefaces.org/ui">

    <h:form id="formCadastroMsgDialog" prependId="false">
    
      <c:set  var="isCadastro" value="true" scope="view"/>
      
      <p:panel header="Cadastro de Mensagem" id="panelCadastroMsgDialog">
      
           <p:panelGrid id="gridMsgDialog" columns="3">
              <p:column>
              
                  <p:row>
                       <h:outputLabel for="idMsgDialog" value="Código"
                       id="LabelIdmsgDialog" style="width:300px;"/>
                  </p:row>
              </p:column>
              
              <p:column>
                   <p:row>
                      
                       <p:inputText id="idMsgDialog" readonly="true"
                         value="#{mensagemBeanView.objetoSelecionado.men_codigo}"/>
                   
                   </p:row>
              
              
              </p:column>
              
              <p:column />
              
              <p:column>
              
                  <p:row>
                     <h:outputLabel for="user_origemMsgDialog" value="Origem: " id="LabelOrigemDialog"/>
                  
                  </p:row>
              
              </p:column>
              
              <p:column>
                 <p:row>
                     <p:inputText id="user_origemMsgDialog" 
                     readonly="true" immediate="true"
                     value="#{mensagemBeanView.objetoSelecionado.user_origem.ent_codigo}"/>
                     
                     
                     <p:inputText id="LoginOrigemMsgDialog" 
                     readonly="true" immediate="true" style="width:376px;" required="true" requiredMessage="Usuário logado não carregado"
                     value="#{mensagemBeanView.objetoSelecionado.user_origem.ent_login}"/>
                     
                     
                 
                 </p:row>
              
              </p:column>
              
              <p:column>
                  
                  <p:row>
                     
                      <p:message for="LoginOrigemMsgDialog" />
                  
                  </p:row>
              
              </p:column>
              
              <p:column>
                 <p:row>
                    <h:outputLabel  for="user_destinoMsgDialog" value="Destino : "
                       id="LabelDestinoMsgDialog" />
                 
                 </p:row>
              
              </p:column>
              
              <p:column>
              
                  <p:row>
                       <p:inputText id="user_destinoMsgDialog" immediate="false" required="true"
                        requiredMessage="Informe o usuário de destino."
                        value="#{mensagemBeanView.objetoSelecionado.user_destino.ent_codigo}"
                        onblur="pesquisaUserDestinoPerderFocoDialog(this.value);"/>
                        
                        <p:commandButton id="buttonPesquisarDestinoDialog"
                         icon="imgPesquisa"
                         ajax="true" immediate="true" oncomplete="destinoDialogMsgDialog.show();" >
                        
                        </p:commandButton>
                        
                        <p:inputText id="LoginDestinoMsgDialog" readonly="true"
                           immediate="true"
                           value="#{mensagemBeanView.objetoSelecionado.user_destino.ent_login}"
                           required="true" requiredMessage="Informe o usuário de destino."
                           style="width:376px;"/>
                  
                  </p:row>
              
              </p:column>
              
              <p:column>
                  <p:row>
                     <p:message for="user_destinoMsgDialog" />
                  </p:row>
              
              </p:column>
              <p:column>
                 <p:row>
                   <h:outputLabel for="men_exigirrespostaMsgDialog" value="Exige resposta: " id="LabelExigeRespMsgDialog" />
                 </p:row> 
              
              </p:column>
              <p:column>
                   <p:row>
                        <p:selectBooleanCheckbox id="men_exigirrespostaMsgDialog" 
                           value="#{mensagemBeanView.objetoSelecionado.men_exigirresposta}"/>
                   
                   </p:row>
              
              </p:column>
              <p:column>
                 <p:row>
                     <p:message for="men_exigirrespostaMsgDialog" />
                 </p:row>
              
              </p:column>
              
              <p:column>
				<p:row>
					<h:outputLabel for="men_datahoraMsgDialog" value="Data envio : "
						id="labelDataMsgDialog" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<p:inputText
						value="#{mensagemBeanView.objetoSelecionado.men_hora}"
						id="men_datahoraMsgDialog" readonly="true">
						<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy HH:mm:ss"
							dateStyle="long" timeStyle="full" timeZone="GMT-03:00" />
					</p:inputText>
				</p:row>
			</p:column>
			<p:column>
				<p:row>
					<p:message for="men_datahoraMsgDialog" />
				</p:row>
			</p:column>
            
            <p:column>
               <p:row>
                  <h:outputLabel for="men_assuntoMsgDialog" value="Assunto : "
                     id="LabelAssMsgDialog" />
               
               </p:row>
            
            
            </p:column>  
            
           <p:column>
               <p:row>
                    <p:inputText id="men_assuntoMsgDialog"  style="width:502px;"
                     value="#{mensagemBeanView.objetoSelecionado.men_assunto}"
                     immediate="false" required="true" maxlength="80"
                     requiredMessage="Informe o assunto."/>
                
               </p:row>
           
           </p:column>
              
           <p:column>
           
              <p:message for="men_assuntoMsgDialog" />
           
           </p:column>  
           
           <p:column>
              <p:row>
                  <h:outputLabel for="men_mensagemMsgDialog" value="Mensagem : "
                   id="LabelMsgDialog"/>
              
              </p:row>
           
           </p:column>
           
           <p:column>
              
               <p:row>
               
                   <p:inputTextarea id="men_mensagemMsgDialog" autoResize="true" 
                    maxlength="500"
                    style="height:110px; width:502px;"
                    value="#{mensagemBeanView.objetoSelecionado.men_mensagem}"
                    immediate="false" required="true" requiredMessage="Informe a mensagem"/>
               
               </p:row>   
           
           </p:column>
           
           
           <p:column>
              <p:row>
                 <p:message for="men_mensagemMsgDialog" />
                  
              </p:row>
           
           </p:column>
            
           
           </p:panelGrid>
      </p:panel>
      
      <p:spacer height="30px" />
      
      <p:commandButton value="Novo" 
        style="height:40px;width:100px;background:#CDCDC1;border: 1px solid #FFFFFF;"
        rendered="#{contextoBean.possuiAcesso('MENSAGENS_ENVIAR_NOVO','ADMIN')}"
        actionListener="#{mensagemBeanView.novo}" ajax="true" id="buttonNovo"
        immediate="false" update="formCadastroMsgDialog , :formTemplate:msg">
        
            <p:ajax listener="#{mensagemBeanView.novo}" />
      
       </p:commandButton>
      
       <p:commandButton value="Salvar" 
        style="height:40px;width:100px;background:#CDCDC1;border: 1px solid #FFFFFF;"
        rendered="#{contextoBean.possuiAcesso('MENSAGENS_ENVIAR_NOVO','ADMIN')}"
        actionListener="#{mensagemBeanView.saveNotReturn}" ajax="true" id="buttonSalvar"
        partialSubmit="true" process="@this,@form"
        immediate="false" update="formCadastroMsgDialog , :formTemplate:msg">
        
      </p:commandButton>
      
      
       <p:commandButton value="Cancelar" 
        style="height:40px;width:100px;background:#CDCDC1;border: 1px solid #FFFFFF;"
        onclick="enviarMsgDialog.hide();"
        actionListener="#{mensagemBeanView.novo}" ajax="true" id="buttonCancelar"
        immediate="false" update="formCadastroMsgDialog , :formTemplate:msg">
        
      </p:commandButton>
      
      <p:dialog widgetVar="destinoDialogMsgDialog" id="destinoDialogMsgDialog" modal="false" resizable="false"
        height="400" dynamic="true" appendToBody="false" header="Consulta usuário destino">
      
          
      
      </p:dialog>
      
      
    
    </h:form>



</html>